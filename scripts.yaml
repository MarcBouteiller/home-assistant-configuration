fermeture_volets:
  alias: Fermeture volets
  sequence:
    - service: cover.close_cover
      data:
        entity_id: group.all_covers

ouverture_volets:
  alias: Ouverture volets
  sequence:
    - service: cover.open_cover
      data:
        entity_id: group.all_covers

positionner_volets:
  alias: Positionner les volets
  sequence:
    - service: cover.set_cover_position
      data:
        entity_id: group.all_covers
        position: "{{ position }}"

eteindre_prise_garage:
  alias: Eteindre prise du garage
  sequence:
    - condition: numeric_state
      entity_id: sensor.broadlink_spx_power_sensor
      below: 10
    - service: switch.turn_off
      data:
        entity_id: switch.prise_garage

turn_off_tv:
  alias: Minuteur Chromecast
  sequence:
    - condition: numeric_state
      entity_id: input_number.tv_timer
      above: 0
    - delay: '00:{{ states.input_number.tv_timer.state | int }}:00'  
    - service: media_player.turn_off
      data:
        entity_id: media_player.chromecast_salon 
    - service: input_number.set_value
      data:
        entity_id: input_number.tv_timer
        value: 30

notify_car_charging:
  alias: notifier chargement de la voiture
  sequence:
  - service: notify.html5
    data:
      title: "{{ states.input_text.notifications_generic_title.state }}"
      message: "Voiture en charge : {{states.sensor.charge_estimated_time_hour.state }}h"

notify_car_charged:
  alias: notifier fin de chargement de la voiture
  sequence:
  - service: notify.html5
    data:
      title: "{{ states.input_text.notifications_generic_title.state }}"
      message: "Voiture charg√©e en : {{states.sensor.day_car_charge.attributes.value }}"